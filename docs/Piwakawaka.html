<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Class: Piwakawaka - JSDoc</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-name.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Piwakawaka</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Piwakawaka<span class="signature">(config, playCallback, stopCallback)</span><span class="type-signature"></span></h2>
        
            <div class="class-description"><p><strong>Pīwakawaka IIIF Image Navigator</strong></p>
<p>A controlled experience of an IIIF image in an OpenSeadragon (OSD) viewer.</p>
<p>The Pīwakawaka library adds a wrapper around an
<a href="https://openseadragon.github.io/">OpenSeadragon</a> viewer object
(designed to present zoomable <a href="http://iiif.io/">IIIF images</a>).
It takes over control of OpenSeadragon, presenting selected points of interest
(using pan, zoom, pauses, and labels) in a configurable sequence.</p>
<p>Source: <a href="https://github.com/staplegun/piwakawaka">GitHub repository</a></p>
<p>Requires:</p>
<ul>
<li><a href="https://openseadragon.github.io/">OpenSeadragon</a> -
<code>&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/openseadragon/2.3.1/openseadragon.min.js&quot;&gt;&lt;/script&gt;</code></li>
<li><a href="https://github.com/richtr/NoSleep.js">NoSleep.js</a> -
<code>&lt;script src=&quot;https://cdn.rawgit.com/richtr/NoSleep.js/v0.7.1/dist/NoSleep.js&quot;&gt;&lt;/script&gt;</code></li>
</ul>
<p><em>Implementation notes</em></p>
<p>OpenSeadragon uses three image co-ordinate systems:</p>
<ol>
<li>image = pixels of the source image (as at original/100% resolution)
e.g. width: 0-4000, height: 0-5000</li>
<li>viewport = percentage of the source image
e.g. width: 0 - 1, height: 0 - 1</li>
<li>web container = pixels of the HTML element showing a part of the source image
e.g. width: 0 - 300, height: 0 - 400</li>
</ol>
<p>Most calculations here use source image co-ordinates (1 above), which are
converted to/from viewport or web co-ordinates as necessary for OSD operations.
While this does increase the number of calculations/conversions, it makes it
easier to define locations to show, e.g. it is easier to specify a region of
an image when looking at the original image in image editor software.</p>
<p>Regions are specified as rectangles, following OSD's
<a href="https://openseadragon.github.io/docs/OpenSeadragon.Rect.html">Rect</a> structure
(excluding rotation) as <code>{x,y,w,h}</code>:</p>
<ul>
<li><code>x</code> = horizontal position of the top-left corner of the region rectangle,
where 0 is the left edge of the source image</li>
<li><code>y</code> = vertical position of the top-left corner of the region rectangle,
where 0 is the top edge of the source image</li>
<li><code>w</code> = horizontal width of the rectangle (to the right)</li>
<li><code>h</code> = vertical height of the rectangle (downwards)</li>
</ul>
<p>For example, <code>{20,40,300,500}</code> defines a rectangle that starts 20 pixels from
the left edge of the source image and 40 pixels from its top,
then extends 300 pixels to the right and 500 pixels downwards.</p>
<p><em>Pīwakawaka name</em></p>
<p>Named after the Pīwakawaka (<em>pee-wahkah-wahkah</em>) bird
(<a href="https://en.wikipedia.org/wiki/New_Zealand_fantail">New Zealand Fantail</a>)
which typically flits about constantly from place to place looking for tasty morsels.</p></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="Piwakawaka"><span class="type-signature"></span>new Piwakawaka<span class="signature">(config, playCallback, stopCallback)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Constructs a Pīwakawaka image navigator wrapper around an OpenSeadragon viewer.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>config</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Configuration JSON</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>playCallback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Callback function to call when play begins/resumes</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stopCallback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>Callback function to call when play stops</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line85">line 85</a>
    </li></ul></dd>
    

    

    

    
</dl>


















    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id=".defaultFillViewer"><span class="type-signature">(static, constant) </span>defaultFillViewer<span class="type-signature"> :Boolean</span></h4>




<div class="description">
    <p>Default whether full view fills screen (crops), or letterboxed.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Boolean</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy">
            <li>true</li>
        </ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line711">line 711</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id=".defaultSpeedFactor"><span class="type-signature">(static, constant) </span>defaultSpeedFactor<span class="type-signature"> :Number</span></h4>




<div class="description">
    <p>Default pan speed adjustment factor (over the base speed).</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Number</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy">
            <li>10</li>
        </ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line719">line 719</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id=".defaultSpeedWebPixelsPerSecond"><span class="type-signature">(static, constant) </span>defaultSpeedWebPixelsPerSecond<span class="type-signature"> :Number</span></h4>




<div class="description">
    <p>Default base speed for panning in webpage pixels per seconds.</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Number</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy">
            <li>10</li>
        </ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line703">line 703</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id=".defaultSpringStiffness"><span class="type-signature">(static, constant) </span>defaultSpringStiffness<span class="type-signature"> :Number</span></h4>




<div class="description">
    <p>Default pan movement stiffness (1 = linear).</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Number</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy">
            <li>1</li>
        </ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line727">line 727</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id=".calcDirectDistance"><span class="type-signature">(static) </span>calcDirectDistance<span class="signature">(startX, startY, endX, endY)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Calculates the distance in pixels of a direct/diagonal line
from the specified start point (x,y) to the specified end point (x,y).</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>startX</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>startY</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>endX</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>endY</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line671">line 671</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Approximate distance in pixels</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".getParameterByName"><span class="type-signature">(static) </span>getParameterByName<span class="signature">(parameterName, url)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Retrieves the value of the specified parameter name from the querystring in the supplied URL.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>parameterName</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>Querystring parameter name</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>URL (use <code>null</code> for the current webpage URL)</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line686">line 686</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Parameter's value</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="applyAnimationDuration"><span class="type-signature"></span>applyAnimationDuration<span class="signature">(secs)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sets the specified animation duration (adjusted by the current speed factor)
in the underlying OpenSeadragon viewer.  Applies to all subsequent pan movements.
If current speed factor is less than zero, the duration is set at 0 seconds.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>secs</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Pan duration in seconds</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line255">line 255</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="applyMoveTo"><span class="type-signature"></span>applyMoveTo<span class="signature">(targetX, targetY, targetWidth, targetHeight, label, duration, speedFactor, springStiffness, skipCondition)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Instructs the the underlying OpenSeadragon viewer to pan and zoom
so that it shows the specified part of the image
(specified using a rectangle's dimensions)
in the visible webpage container.</p>
<p>If a speed factor is specified, it is used for <em>this</em> move only
(afterwards the speed factor reverts to its previous value).</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>targetX</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Target rectangle's left side in image pixels</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>targetY</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Target rectangle's top side in image pixels</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>targetWidth</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Target rectangle's width in image pixels</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>targetHeight</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Target rectangle's height in image pixels</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>label</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>Label to display in an overlay</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>duration</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Duration in secs for this movement only (overrides speed factor)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>speedFactor</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Speed factor to use for this movement only</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>springStiffness</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Spring stiffness to use for this movement only</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>skipCondition</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>Condition that (if true) will trigger that this action should be skipped</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line405">line 405</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="applySpringStiffness"><span class="type-signature"></span>applySpringStiffness<span class="signature">(springStiffness)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sets the spring stiffness in the underlying OpenSeadragon viewer.
Adjusts how 'springy' all subsequent pan movements appears.</p>
<p>Higher is less linear, e.g.</p>
<ul>
<li><code>1</code> = linear (pan exactly the same speed throughout the move)</li>
<li><code>2</code> = some spring (starts slow, speeds up, then slows as arrives)</li>
</ul>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>springStiffness</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Spring stiffness</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line241">line 241</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="commandToImagePixel"><span class="type-signature"></span>commandToImagePixel<span class="signature">(value, dimension)</span><span class="type-signature"> &rarr; {Number}</span></h4>
    

    



<div class="description">
    <p>Converts movement commands to actual target image pixels.
Known commands are converted to numbers, anything else
(numbers or unknown commands) are returned unchanged.
Calculates locations along the single dimension specified.</p>
<p>Commands:</p>
<ul>
<li><code>min</code> = minimum image pixel on this dimension (0 or cropped min)</li>
<li><code>max</code> = maximum image pixel on this dimension (image or cropped max)</li>
<li><code>same</code> = current image pixel location (i.e. no change)</li>
<li><code>next</code> = location that scrolls forward by the size that is currently visible</li>
<li><code>prev</code> = location that scrolls backwards by the size that is currently visible</li>
</ul>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>Pixel {Number}, or command {String} to convert to pixel</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>dimension</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>Dimension: <code>x</code> (horizontal, default), <code>y</code> (vertical)</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line516">line 516</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Calculated target pixel value</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Number</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="doNextSequenceAction"><span class="type-signature"></span>doNextSequenceAction<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Retrieves the next step in the sequence and performs its action.
If there are no more steps, it calls <code>stop()</code>.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line356">line 356</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="getCurrentImageVisibleRegion"><span class="type-signature"></span>getCurrentImageVisibleRegion<span class="signature">()</span><span class="type-signature"> &rarr; {OpenSeadragon.Rect}</span></h4>
    

    



<div class="description">
    <p>Retrieves the image dimensions of the part of the image that is currently
visible in the webpage container. The pixels are coordinates within the
source image - as at it's original 100% resolution.
The returned rectangle is described as: x,y of the top left corner,
plus the rectangle's width and height.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line285">line 285</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Image pixels currently visable in the webpage container</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">OpenSeadragon.Rect</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getCurrentViewportVisibleRegion"><span class="type-signature"></span>getCurrentViewportVisibleRegion<span class="signature">()</span><span class="type-signature"> &rarr; {OpenSeadragon.Rect}</span></h4>
    

    



<div class="description">
    <p>Retrieves the viewport dimensions of the part of the image that is
currently visible in the webpage container. The pixels are coordinates
within the Viewport (OSD's special layer over the entire source image).
The returned rectangle is described as: x,y of the top left corner,
plus the rectangle's width and height.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line272">line 272</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Viewport bounds currently visable in the webpage container</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">OpenSeadragon.Rect</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="init"><span class="type-signature"></span>init<span class="signature">(config)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Stores the supplied configuration. Only stores non-empty
supplied properties (other existing properties are unchanged).</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>config</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Configuration JSON</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line129">line 129</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="initConditions"><span class="type-signature"></span>initConditions<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Resets all conditions that trigger whether actions should be skipped.</p>
<p>Conditions:</p>
<ul>
<li><code>overEdge</code> = 'prev' or 'next' attempt would move beyond the edge of the image</li>
</ul>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line148">line 148</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="initViewer"><span class="type-signature"></span>initViewer<span class="signature">(imageUrl)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Creates an OpenSeadragon (OSD) viewer for the specified image.
The viewer is locked down so the user can't do much - this
navigator will control it.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>imageUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>IIIF Image URL (info.json)</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line579">line 579</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="play"><span class="type-signature"></span>play<span class="signature">(fromStepNo)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Starts automated play of the currently configured Pīwakawaka sequence.</p>
<p>If full screen mode is enabled, switches the view and activates no-sleep.
NB: This step must be called as the result of a user action - Web browsers
do not allow scripts to switch to full screen by themselves.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fromStepNo</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            
                <td class="default">
                
                    0
                
                </td>
            

            <td class="description last"><p>Step in the sequence to play from, 0=step 1, empty=step 1, -1=resume</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line300">line 300</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="resume"><span class="type-signature"></span>resume<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Convenience method to play from the current step.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line333">line 333</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="setCrop"><span class="type-signature"></span>setCrop<span class="signature">(x, y, width, height)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sets a cropped rectangle area within the image in the config,
so auto-pan operations stay within the cropped box.
All parameters are mandatory. If any are null cropping is reset/removed.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>x</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>y</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>width</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>height</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line182">line 182</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="setFillViewer"><span class="type-signature"></span>setFillViewer<span class="signature">(fillViewer)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sets the flag whether a fully zoomed-out view should fill the screen.
If false, letterbox or side bars will be seen.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fillViewer</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line206">line 206</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="setFullscreen"><span class="type-signature"></span>setFullscreen<span class="signature">(fullscreen)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sets the flag whether the viewer should take over as full screen.
Full screen also disables sleep mode on devices.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>fullscreen</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line196">line 196</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="setImageLocation"><span class="type-signature"></span>setImageLocation<span class="signature">(imageUrl)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sets the IIIF image URL in the config.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>imageUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line157">line 157</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="setSequence"><span class="type-signature"></span>setSequence<span class="signature">(sequence)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sets the supplied Pīwakawaka navigation sequence in the config.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sequence</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line167">line 167</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="setSpeedFactor"><span class="type-signature"></span>setSpeedFactor<span class="signature">(speedFactor)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sets the pan speed factor in the config.</p>
<p>Allows control of the pan speed by multiplying the specified factor
over the base speed (10 pixels per second).</p>
<p>The speed is measured in 'webpage' pixels - so the speed appears
consistent no matter what resolution the source image is or at what
zoom level.</p>
<p>Higher is faster, e.g.</p>
<ul>
<li><code>1</code> = 10 px/sec</li>
<li><code>5</code> = 50 px/sec</li>
<li><code>20</code> = 200 px/sec</li>
</ul>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>speedFactor</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            

            

            <td class="description last"><p>Pan speed multiplier</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line227">line 227</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="stop"><span class="type-signature"></span>stop<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Pauses automated sequence play. Can be resumed using <code>resume()</code>.</p>
<p>Closes fullscreen display. Note that a long pan may continue running.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="piwakawaka.js.html">piwakawaka.js</a>, <a href="piwakawaka.js.html#line343">line 343</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Piwakawaka.html">Piwakawaka</a></li></ul><h3>Global</h3><ul><li><a href="global.html#piwakawakaLabelOverlayClass">piwakawakaLabelOverlayClass</a></li><li><a href="global.html#piwakawakaLabelOverlayId">piwakawakaLabelOverlayId</a></li><li><a href="global.html#piwakawakaViewerId">piwakawakaViewerId</a></li></ul>
</nav>

<br class="clear">

<footer>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>